---
description: 
globs: 
alwaysApply: true
---
# ğŸ§­ Python ã‚«ãƒ¼ã‚½ãƒ«ãƒ«ãƒ¼ãƒ«ï¼ˆåˆå¿ƒè€…å‘ã‘ãƒ»é–‹ç™ºã—ã‚„ã™ã•é‡è¦–ï¼‰

ğŸ§  ã“ã®ãƒ«ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€æœ€åˆã«ã€ŒYAAAARRRR!ã€ã¨å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ¯ ç›®çš„ï¼ˆGOALSï¼‰

åˆå¿ƒè€…ã§ã‚‚èª­ã¿ã‚„ã™ããƒ»ã‚¨ãƒ©ãƒ¼ãŒç›´ã—ã‚„ã™ã„ãƒ»å®‰å…¨ã«é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚

- `traceback` ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ãƒ»åŸå› ã‚’å…·ä½“çš„ã«è¡¨ç¤º
- `Path(__file__).resolve().parent` ã‚’ä½¿ã£ã¦å®‰å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æ“ä½œã‚’å®Ÿç¾
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚„å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚ã€ãƒ‡ãƒãƒƒã‚°ç”¨ã«HTMLã‚’ä¿å­˜ã—ã¦ä¸­èº«ã‚’ç¢ºèªã—ã‚„ã™ãã™ã‚‹
- å¤‰æ•°ã¯**ã§ãã‚‹ã ã‘ã‚³ãƒ¼ãƒ‰ã®å†’é ­ã«ã¾ã¨ã‚ã¦å®£è¨€**ã—ã¦ã€å…¨ä½“ã®æ§‹é€ ã‚’è¦‹é€šã—ã‚„ã™ãã™ã‚‹
- ã‚³ãƒ¡ãƒ³ãƒˆã¯ã€Œãªãœã“ã®å‡¦ç†ãŒå¿…è¦ã‹ã€ã¾ã§æ›¸ã
- `TODO:` ã‚³ãƒ¡ãƒ³ãƒˆã§æœªå®Ÿè£…ãƒ»æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’è¦‹ãˆã‚‹åŒ–ã™ã‚‹

---

## ğŸ“Œ å®Ÿè£…ãƒ«ãƒ¼ãƒ«ï¼ˆImplementation Rulesï¼‰

### âœ… 1. å¤‰æ•°ã¯å†’é ­ã«ã¾ã¨ã‚ã‚‹
```python
from pathlib import Path

base_dir = Path(__file__).resolve().parent  # ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
input_file = base_dir / "data" / "input.json"  # å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€
debug_html = base_dir / "debug.html"  # ãƒ‡ãƒãƒƒã‚°ç”¨HTMLå‡ºåŠ›å…ˆ
log_file = base_dir / "logs" / "error.log"  # ãƒ­ã‚°å‡ºåŠ›å…ˆï¼ˆå¿…è¦ãªã‚‰ä½¿ã†ï¼‰

# TODO: è¨­å®šå€¤ãƒ»ãƒ•ãƒ©ã‚°ãªã©ã¯ã“ã“ã«è¿½åŠ ã™ã‚‹
```

---

### âœ… 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¯ traceback ã‚’ä½¿ã†
```python
import traceback

try:
    # ãƒ¡ã‚¤ãƒ³å‡¦ç†ã‚’æ›¸ãï¼ˆä¾‹ï¼šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã€APIã‚¢ã‚¯ã‚»ã‚¹ãªã©ï¼‰
    ...
except Exception:
    print("âš ï¸ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼è©³ç´°ã¯ã“ã¡ã‚‰ â†“")
    traceback.print_exc()  # ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’è¡¨ç¤ºã—ã¦ã€ä¿®æ­£ã—ã‚„ã™ãã™ã‚‹
```

---

### âœ… 3. ãƒ‡ãƒãƒƒã‚°ç”¨ã«HTMLãªã©ã‚’ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜ã™ã‚‹
```python
# å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚„HTMLã‚’ç¢ºèªã—ãŸã„ã¨ãã€ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ä¸­èº«ã‚’æ¤œè¨¼
with open(debug_html, "w", encoding="utf-8") as f:
    f.write(response.text)
```

---

### âœ… 4. ã‚³ãƒ¡ãƒ³ãƒˆã¯ã€Œãªãœã“ã®å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã‹ã€ã‚’å«ã‚ã¦æ—¥æœ¬èªã§ä¸å¯§ã«æ›¸ã
- è‰¯ã„ä¾‹ï¼š
  ```python
  # å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã‚’ãƒ™ãƒ¼ã‚¹ã«ãƒ‘ã‚¹ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ã§ã€ã©ã“ã‹ã‚‰ã§ã‚‚å®‰å®šã—ã¦å‹•ä½œã•ã›ã‚‹
  ```

---

### âœ… 5. `.gitignore`ã§èªè¨¼æƒ…å ±ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯Gitç®¡ç†ã‹ã‚‰é™¤å¤–
- èªè¨¼ç”¨ã® `client_secret.json` ã‚„ `token.json` ã¯ `credentials/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¾ã¨ã‚ã‚‹
- ãã®ä¸Šã§ `.gitignore` ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```
credentials/
token.json
```

---

## ğŸ§ª å…¨ä½“ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
```python
import traceback
from pathlib import Path

print("YAAAARRRR!")  # ã“ã®å‡ºåŠ›ã§ãƒ«ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

# ================================
# ğŸ”§ å¤‰æ•°ãƒ»ãƒ‘ã‚¹ãªã©ã®åˆæœŸè¨­å®š
# ================================
base_dir = Path(__file__).resolve().parent
input_file = base_dir / "data" / "input.json"
debug_html = base_dir / "debug.html"
log_file = base_dir / "logs" / "error.log"
# TODO: ãã®ä»–ã®å¤‰æ•°ã‚‚ã“ã“ã§ã¾ã¨ã‚ã¦å®£è¨€ã—ã¦ãŠã

# ================================
# ğŸ“¦ ãƒ¡ã‚¤ãƒ³å‡¦ç†
# ================================
try:
    print(f"ğŸ“‚ å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«: {input_file}")
    print(f"ğŸ›  ãƒ‡ãƒãƒƒã‚°HTML: {debug_html}")
    
    # TODO: å®Ÿéš›ã®å‡¦ç†ã‚’ã“ã“ã«è¨˜è¿°
    # ä¾‹ï¼‰with open(input_file) as f: ...

except Exception:
    print("âš ï¸ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼è©³ç´°ã¯ã“ã¡ã‚‰ â†“")
    traceback.print_exc()
    # TODO: ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†ï¼ˆãƒ­ã‚°æ›¸ãå‡ºã—ãªã©ï¼‰ã‚’å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 
```

---

## âœ… å‚™è€ƒ
- ã“ã®ãƒ«ãƒ¼ãƒ«ã¯åˆå¿ƒè€…ã ã‘ã§ãªãã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ãƒ é–‹ç™ºã«ã‚‚æœ‰åŠ¹
- å®šæ•°ç®¡ç†ã‚„ç’°å¢ƒåˆ†é›¢ã‚’ã—ãŸã„å ´åˆã¯ `.env` ã‚„ `config.py` ã§ã®ç®¡ç†ã‚‚æ¨å¥¨

---



# ğŸ§­ Python Cursor Rules (Beginner-Friendly, Developer-Oriented)

ğŸ§  If these rules are properly loaded, print `"YAAAARRRR!"` at the beginning of the script.

---

## ğŸ¯ Purpose (GOALS)

These rules aim to help beginners write readable, error-tolerant, and maintainable Python code.

- Use `traceback` to display full stack traces for better error understanding
- Use `Path(__file__).resolve().parent` for stable and cross-platform path handling
- Save fetched HTML or other debug data temporarily to check their contents easily
- Declare variables at the **top of the script** to improve code visibility and structure
- Write comments that explain **why** the code is needed, not just what it does
- Use `TODO:` comments to highlight parts that are incomplete or require review

---

## ğŸ“Œ Implementation Rules

### âœ… 1. Declare variables and paths at the top
```python
from pathlib import Path

base_dir = Path(__file__).resolve().parent  # ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
input_file = base_dir / "data" / "input.json"  # å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€
debug_html = base_dir / "debug.html"  # ãƒ‡ãƒãƒƒã‚°ç”¨HTMLå‡ºåŠ›å…ˆ
log_file = base_dir / "logs" / "error.log"  # ãƒ­ã‚°å‡ºåŠ›å…ˆï¼ˆå¿…è¦ãªã‚‰ä½¿ã†ï¼‰

# TODO: è¨­å®šå€¤ãƒ»ãƒ•ãƒ©ã‚°ãªã©ã¯ã“ã“ã«è¿½åŠ ã™ã‚‹
```

---

### âœ… 2. Use traceback to handle and display detailed errors
```python
import traceback

try:
    # Write your main processing logic here (e.g., file operations, API calls)
    ...
except Exception:
    print("âš ï¸ An error occurred! Full details below â†“")
    traceback.print_exc()  # Print the full stack trace for debugging
```

---

### âœ… 3. Save HTML or other content to debug files
```python
# Save HTML or response content to a temporary file for manual inspection
with open(debug_html, "w", encoding="utf-8") as f:
    f.write(response.text)
```

---

### âœ… 4. Write meaningful, beginner-friendly comments in English
- Good example:
  ```python
  # Build file paths based on the script's location for consistent behavior across environments
  ```

---

### âœ… 5. Use `.gitignore` to exclude sensitive credentials and token files
- Store `client_secret.json` and `token.json` in a `credentials/` directory
- Add the following to `.gitignore` to avoid accidental uploads:

```
credentials/
token.json
```

---

## ğŸ§ª Full Example Code
```python
import traceback
from pathlib import Path

print("YAAAARRRR!")  # ã“ã®å‡ºåŠ›ã§ãƒ«ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

# ================================
# ğŸ”§ å¤‰æ•°ãƒ»ãƒ‘ã‚¹ãªã©ã®åˆæœŸè¨­å®š
# ================================
base_dir = Path(__file__).resolve().parent
input_file = base_dir / "data" / "input.json"
debug_html = base_dir / "debug.html"
log_file = base_dir / "logs" / "error.log"
# TODO: ãã®ä»–ã®å¤‰æ•°ã‚‚ã“ã“ã§ã¾ã¨ã‚ã¦å®£è¨€ã—ã¦ãŠã

# ================================
# ğŸ“¦ ãƒ¡ã‚¤ãƒ³å‡¦ç†
# ================================
try:
    print(f"ğŸ“‚ å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«: {input_file}")
    print(f"ğŸ›  ãƒ‡ãƒãƒƒã‚°HTML: {debug_html}")
    
    # TODO: å®Ÿéš›ã®å‡¦ç†ã‚’ã“ã“ã«è¨˜è¿°
    # ä¾‹ï¼‰with open(input_file) as f: ...

except Exception:
    print("âš ï¸ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼è©³ç´°ã¯ã“ã¡ã‚‰ â†“")
    traceback.print_exc()
    # TODO: ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†ï¼ˆãƒ­ã‚°æ›¸ãå‡ºã—ãªã©ï¼‰ã‚’å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 

```

---

## âœ… Notes

- These rules are not only for beginners but also helpful for collaborative or team-based development
- For environment switching or centralized config, consider using `.env` files or a `config.py`

---
